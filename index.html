<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GITADORA GALAXY WAVE DELTA Drummania Settings Generator (unofficial)</title>
</head>
<body style="font-family: Arial, sans-serif; margin: 0; padding: 10px; max-width: 100%; background: #f0f0f0;">
    <!-- Modal -->
    <input type="checkbox" id="modal-toggle" checked style="display: none;">
    <div style="display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;" id="modal">
        <div style="background: white; margin: 20% auto; padding: 20px; text-align: center; width: 80%; border-radius: 10px;">
            <p style="font-weight: bold;">
                <span lang="en">Visual timing players or new players<br>Only those who apply<br>Tap OK button</span>
                <span lang="ja" style="display: none;">目押し勢 or 新規プレイヤー<br>どちらかに該当する方のみ<br>OKボタンをタップ</span>
            </p>
            <form action="">
                <button type="submit" style="padding: 10px 20px;">OK</button>
            </form>
        </div>
    </div>

    <!-- Language Toggle -->
    <form style="position: fixed; top: 10px; right: 10px; z-index: 10;">
        <label><input type="radio" name="lang" value="en" checked onchange="this.form.submit()"> English</label>
        <label><input type="radio" name="lang" value="ja" onchange="this.form.submit()"> 日本語</label>
    </form>

    <!-- Main Content -->
    <div style="text-align: center; max-width: 360px; margin: auto;">
        <h1 style="font-size: 1.5em;">
            <span lang="en">GITADORA GALAXY WAVE DELTA Drummania Settings Generator (unofficial)</span>
            <span lang="ja" style="display: none;">GITADORA GALAXY WAVE DELTA Drummania設定ジェネレーター（非公式）</span>
        </h1>
        <h2 style="font-size: 1em; color: #555;">
            <span lang="en">Set the shutter top as the judgment line to disable delay.</span>
            <span lang="ja" style="display: none;">シャッターの上部を判定ラインとして遅延を無効化します。</span>
        </h2>

        <!-- Settings Form -->
        <form action="" style="margin-top: 20px;">
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">BPM:</span>
                    <span lang="ja" style="display: none;">BPM:</span>
                    <input type="number" name="bpm" value="180" min="1" step="1" style="width: 80px;" required>
                    <button type="submit" formaction="?bpm=179" style="width: 30px;">-</button>
                    <button type="submit" formaction="?bpm=181" style="width: 30px;">+</button>
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">HI-SPEED:</span>
                    <span lang="ja" style="display: none;">HI-SPEED:</span>
                    <input type="number" name="hispeed" value="3.75" min="0.5" max="10.0" step="0.25" style="width: 80px;" required>
                    <button type="submit" formaction="?hispeed=3.5" style="width: 30px;">-</button>
                    <button type="submit" formaction="?hispeed=4.0" style="width: 30px;">+</button>
                    <span style="color: red;" lang="en" id="hispeed-warning"></span>
                    <span style="color: red; display: none;" lang="ja" id="hispeed-warning-ja"></span>
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">Green Number:</span>
                    <span lang="ja" style="display: none;">緑数字:</span>
                    <input type="number" name="green" value="300" style="width: 80px;" required>
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">White Number:</span>
                    <span lang="ja" style="display: none;">白数字:</span>
                    <input type="number" name="white" value="150" disabled style="width: 80px; background: #ccc;">
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">Note Display Adjustment:</span>
                    <span lang="ja" style="display: none;">ノーツ表示調整:</span>
                    <input type="number" name="note_adj" value="-6" min="-20" max="20" disabled style="width: 80px; background: #ccc;">
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">Judgment Timing Adjustment:</span>
                    <span lang="ja" style="display: none;">判定タイミング調整:</span>
                    <input type="number" name="timing_adj" value="0" min="-20" max="20" style="width: 80px;" required>
                    <button type="submit" formaction="?timing_adj=-1" style="width: 30px;">-</button>
                    <button type="submit" formaction="?timing_adj=1" style="width: 30px;">+</button>
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">Judgment Line Position:</span>
                    <span lang="ja" style="display: none;">判定ライン位置:</span>
                    <input type="number" name="line_pos" value="8" min="0" max="20" disabled style="width: 80px; background: #ccc;">
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">SHUTTER (IN):</span>
                    <span lang="ja" style="display: none;">SHUTTER (IN):</span>
                    <input type="number" name="shutter_in" value="25" min="0" max="30" disabled style="width: 80px; background: #ccc;">
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">SHUTTER (OUT):</span>
                    <span lang="ja" style="display: none;">SHUTTER (OUT):</span>
                    <input type="number" name="shutter_out" value="16" disabled style="width: 80px; background: #ccc;">
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">Refresh Rate (Hz):</span>
                    <span lang="ja" style="display: none;">リフレッシュレート(Hz):</span>
                    <input type="number" name="refresh" value="60" disabled style="width: 80px; background: #ccc;">
                </label>
            </div>
            <div style="margin: 10px 0;">
                <label>
                    <span lang="en">Monitor Delay (ms):</span>
                    <span lang="ja" style="display: none;">モニター遅延(ms):</span>
                    <input type="number" name="delay" value="9" disabled style="width: 80px; background: #ccc;">
                </label>
            </div>
            <button type="submit" style="padding: 10px 20px; margin-top: 10px;">
                <span lang="en">Update</span>
                <span lang="ja" style="display: none;">更新</span>
            </button>
        </form>

        <!-- Description -->
        <div style="margin: 20px 0; text-align: left;">
            <h3>
                <span lang="en">Description</span>
                <span lang="ja" style="display: none;">説明</span>
            </h3>
            <p>
                <span lang="en">This tool generates settings for GITADORA GALAXY WAVE DELTA Drummania to fix the SHUTTER (OUT) top as the judgment line, minimizing note flicker at 60Hz. BPM changes adjust HI-SPEED, note display, judgment line, and SHUTTER (IN) to maintain green number. HI-SPEED or green number changes adjust other parameters while keeping BPM constant.</span>
                <span lang="ja" style="display: none;">このツールは、GITADORA GALAXY WAVE DELTA Drummaniaの設定を生成し、SHUTTER (OUT)の上部を判定ラインとして固定し、60Hzでノーツのブレを最小限に抑えます。BPMの変更は、緑数字を維持しながらHI-SPEED、ノーツ表示、判定ライン、SHUTTER (IN)を調整します。HI-SPEEDまたは緑数字の変更は、BPMを一定に保ちながら他のパラメータを調整します。</span>
            </p>
        </div>

        <!-- Notes -->
        <div style="margin: 20px 0; text-align: left;">
            <h3>
                <span lang="en">Notes</span>
                <span lang="ja" style="display: none;">注意書き</span>
            </h3>
            <p>
                <span lang="en">
                    ※ Konaste HI-SPEED adjusts in 0.5 units.<br>
                    ※ GITADORA GALAXY WAVE DELTA's initial monitor delay is assumed to be 9ms.<br>
                    ※ Due to varying sound depth balance per song, use headphones to assume no audio delay.<br>
                    ※ HI-SPEED: x3.75 at BPM: 180 is the limit to prevent note flicker.
                </span>
                <span lang="ja" style="display: none;">
                    ※ コナステのHI-SPEED調整は0.5単位です。<br>
                    ※ GITADORA GALAXY WAVE DELTAの初期出荷モニターは遅延9msと仮定。<br>
                    ※ 各スピーカーから出る音の奥行バランスが曲によって異なるため、ヘッドホンを装着して音声遅延無しを想定。<br>
                    ※ HI-SPEED: x3.75 BPM: 180はノーツがぶれない限度です。
                </span>
            </p>
        </div>

        <!-- History Log -->
        <div style="margin: 20px 0; text-align: left;">
            <h3>
                <span lang="en">Change History</span>
                <span lang="ja" style="display: none;">変更履歴</span>
            </h3>
            <textarea readonly style="width: 100%; height: 100px;">
                [2025-04-21 19:48 JST] BPM: 180, HI-SPEED: x3.75, Green: 300
            </textarea>
        </div>
    </div>

    <!-- Language Switch Logic -->
    <script style="display: none;">
        // Simulated server-side language switch (HTML-only fallback)
        document.querySelectorAll('[lang="ja"]').forEach(el => el.style.display = 'none');
        if (new URLSearchParams(window.location.search).get('lang') === 'ja') {
            document.querySelectorAll('[lang="en"]').forEach(el => el.style.display = 'none');
            document.querySelectorAll('[lang="ja"]').forEach(el => el.style.display = 'block');
        }
    </script>
</body>
</html>
