<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GITADORA GALAXY WAVE DELTA Drummania Settings Generator (unofficial)</title>
    <style>
        /* Inline CSS for basic responsive design, as external CSS is not allowed */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f0f0f0;
            font-size: 16px;
            line-height: 1.5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1 {
            font-size: 24px;
            text-align: center;
            margin: 10px 0;
        }
        h2 {
            font-size: 18px;
            text-align: center;
            color: #555;
            margin: 10px 0;
        }
        .lang-toggle {
            text-align: right;
            margin-bottom: 10px;
        }
        .lang-toggle a {
            color: #007bff;
            text-decoration: none;
            font-size: 14px;
        }
        .field {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        .field label {
            flex: 1;
            font-weight: bold;
        }
        .field input, .field span {
            flex: 1;
            padding: 8px;
            font-size: 16px;
        }
        .field input[disabled] {
            background-color: #e0e0e0;
            color: #666;
        }
        .field button {
            padding: 8px;
            font-size: 16px;
            margin: 0 5px;
            cursor: pointer;
        }
        .warning {
            color: red;
            font-size: 14px;
            margin-left: 10px;
        }
        .notes, .explanation {
            margin: 20px 0;
            font-size: 14px;
        }
        .history {
            margin-top: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            font-size: 14px;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            max-width: 80%;
        }
        .modal-content p {
            white-space: pre-line;
            font-size: 16px;
            margin-bottom: 20px;
        }
        .modal-content button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        @media (max-width: 600px) {
            body {
                padding: 10px;
                font-size: 14px;
            }
            h1 {
                font-size: 20px;
            }
            h2 {
                font-size: 16px;
            }
            .field input, .field button {
                font-size: 14px;
                padding: 6px;
            }
            .modal-content {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <!-- Modal for initial warning -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <p id="modal-text">
                Visual timing players or new players only
                Tap OK to proceed
            </p>
            <button onclick="document.getElementById('modal').style.display='none'">OK</button>
        </div>
    </div>

    <div class="container">
        <!-- Language toggle -->
        <div class="lang-toggle">
            <a href="#" onclick="toggleLanguage()">日本語 / Japanese</a>
        </div>

        <!-- Title and subtitle -->
        <h1 id="title">GITADORA GALAXY WAVE DELTA Drummania Settings Generator (unofficial)</h1>
        <h2 id="subtitle">Set the shutter top as the judgment line to disable delay.</h2>

        <!-- Input fields -->
        <div class="field">
            <label id="label-bpm">BPM:</label>
            <button onclick="adjustValue('bpm', -1)">-</button>
            <input type="number" id="bpm" value="180" min="1" step="1" oninput="calculateSettings()">
            <button onclick="adjustValue('bpm', 1)">+</button>
        </div>
        <div class="field">
            <label id="label-hi-speed">HI-SPEED:</label>
            <button onclick="adjustValue('hi-speed', -0.25)">-</button>
            <input type="number" id="hi-speed" value="3.75" min="0.5" max="10.0" step="0.25" oninput="calculateSettings()">
            <button onclick="adjustValue('hi-speed', 0.25)">+</button>
            <span class="warning" id="hi-speed-warning"></span>
        </div>
        <div class="field">
            <label id="label-green-number">Green Number:</label>
            <button onclick="adjustValue('green-number', -1)">-</button>
            <input type="number" id="green-number" value="0" oninput="calculateSettings()">
            <button onclick="adjustValue('green-number', 1)">+</button>
        </div>
        <div class="field">
            <label id="label-white-number">White Number:</label>
            <input type="number" id="white-number" value="0" disabled>
        </div>
        <div class="field">
            <label id="label-note-adjust">Note Display Adjust:</label>
            <input type="number" id="note-adjust" value="-6" min="-20" max="20" disabled>
        </div>
        <div class="field">
            <label id="label-judge-line">Judgment Line Position:</label>
            <input type="number" id="judge-line" value="8" min="0" max="20" disabled>
        </div>
        <div class="field">
            <label id="label-shutter-in">SHUTTER (IN):</label>
            <input type="number" id="shutter-in" value="25" min="0" max="30" disabled>
        </div>
        <div class="field">
            <label id="label-shutter-out">SHUTTER (OUT):</label>
            <input type="number" id="shutter-out" value="16" disabled>
        </div>
        <div class="field">
            <label id="label-refresh-rate">Refresh Rate (Hz):</label>
            <input type="number" id="refresh-rate" value="60" disabled>
        </div>
        <div class="field">
            <label id="label-monitor-delay">Monitor Delay (ms):</label>
            <input type="number" id="monitor-delay" value="9" disabled>
        </div>

        <!-- Explanation -->
        <div class="explanation" id="explanation">
            <h3>Explanation</h3>
            <p>
                This tool generates settings for GITADORA GALAXY WAVE DELTA Drummania by fixing the SHUTTER (OUT) top as the judgment line and adjusting note display timing based on BPM and HI-SPEED. It mimics IIDX's green number (Sudden+) to ensure notes align with a 60Hz refresh rate and 9ms monitor delay. HI-SPEED is constrained between 0.5 and 10.0, with optimal values interpolated (e.g., BPM 78: x8.5, BPM 180: x3.75, BPM 400: x1.5). Exceeding these limits triggers a warning. Editing BPM or HI-SPEED adjusts green number, note display, judgment line, and SHUTTER (IN). Green number editing maintains BPM while adjusting others.
            </p>
        </div>

        <!-- Notes -->
        <div class="notes" id="notes">
            <h3>Notes</h3>
            <ul>
                <li>Konaste HI-SPEED adjusts in 0.5 units.</li>
                <li>Assumes GITADORA GALAXY WAVE DELTA's default monitor has 9ms delay.</li>
                <li>Sound depth varies by song; use headphones for zero audio delay.</li>
                <li>HI-SPEED x3.75 at BPM 180 is the limit for stable note display.</li>
            </ul>
        </div>

        <!-- History log -->
        <div class="history" id="history">
            <h3>Change History</h3>
            <p>[Placeholder: Timestamp and changed values will appear here]</p>
        </div>
    </div>

    <script>
        // Minimal JavaScript for modal and language toggle (required for functionality)
        // Note: Full calculations require additional JS, which is omitted as per request
        function toggleLanguage() {
            const isEnglish = document.getElementById('title').textContent.includes('GITADORA');
            const lang = isEnglish ? 'ja' : 'en';
            document.documentElement.lang = lang;

            // Update texts
            const texts = {
                en: {
                    modal: "Visual timing players or new players only\nTap OK to proceed",
                    title: "GITADORA GALAXY WAVE DELTA Drummania Settings Generator (unofficial)",
                    subtitle: "Set the shutter top as the judgment line to disable delay.",
                    label_bpm: "BPM:",
                    label_hi_speed: "HI-SPEED:",
                    label_green_number: "Green Number:",
                    label_white_number: "White Number:",
                    label_note_adjust: "Note Display Adjust:",
                    label_judge_line: "Judgment Line Position:",
                    label_shutter_in: "SHUTTER (IN):",
                    label_shutter_out: "SHUTTER (OUT):",
                    label_refresh_rate: "Refresh Rate (Hz):",
                    label_monitor_delay: "Monitor Delay (ms):",
                    explanation: `
                        <h3>Explanation</h3>
                        <p>
                            This tool generates settings for GITADORA GALAXY WAVE DELTA Drummania by fixing the SHUTTER (OUT) top as the judgment line and adjusting note display timing based on BPM and HI-SPEED. It mimics IIDX's green number (Sudden+) to ensure notes align with a 60Hz refresh rate and 9ms monitor delay. HI-SPEED is constrained between 0.5 and 10.0, with optimal values interpolated (e.g., BPM 78: x8.5, BPM 180: x3.75, BPM 400: x1.5). Exceeding these limits triggers a warning. Editing BPM or HI-SPEED adjusts green number, note display, judgment line, and SHUTTER (IN). Green number editing maintains BPM while adjusting others.
                        </p>
                    `,
                    notes: `
                        <h3>Notes</h3>
                        <ul>
                            <li>Konaste HI-SPEED adjusts in 0.5 units.</li>
                            <li>Assumes GITADORA GALAXY WAVE DELTA's default monitor has 9ms delay.</li>
                            <li>Sound depth varies by song; use headphones for zero audio delay.</li>
                            <li>HI-SPEED x3.75 at BPM 180 is the limit for stable note display.</li>
                        </ul>
                    `
                },
                ja: {
                    modal: "目押し勢または新規プレイヤーのみ\nOKボタンをタップしてください",
                    title: "GITADORA GALAXY WAVE DELTA Drummania 設定ジェネレーター（非公式）",
                    subtitle: "シャッター上部を判定ラインとして固定し、遅延を無効化します。",
                    label_bpm: "BPM：",
                    label_hi_speed: "HI-SPEED：",
                    label_green_number: "緑数字：",
                    label_white_number: "白数字：",
                    label_note_adjust: "ノーツ表示調整：",
                    label_judge_line: "判定ライン位置：",
                    label_shutter_in: "SHUTTER (IN)：",
                    label_shutter_out: "SHUTTER (OUT)：",
                    label_refresh_rate: "リフレッシュレート（Hz）：",
                    label_monitor_delay: "モニター遅延（ms）：",
                    explanation: `
                        <h3>説明</h3>
                        <p>
                            このツールは、GITADORA GALAXY WAVE DELTA Drummaniaの設定を生成します。SHUTTER (OUT)の上部を判定ラインとして固定し、BPMとHI-SPEEDに基づいてノーツの表示タイミングを調整します。IIDXの緑数字（Sudden+）を模倣し、60Hzのリフレッシュレートと9msのモニター遅延でノーツが正確に表示されるようにします。HI-SPEEDは0.5～10.0の範囲で、適切な値は補間されます（例：BPM 78：x8.5、BPM 180：x3.75、BPM 400：x1.5）。これらの制限を超えると警告が表示されます。BPMまたはHI-SPEEDを編集すると、緑数字、ノーツ表示、判定ライン、SHUTTER (IN)が調整されます。緑数字を編集すると、BPMを維持しながら他の値が調整されます。
                        </p>
                    `,
                    notes: `
                        <h3>注意書き</h3>
                        <ul>
                            <li>コナステのHI-SPEED調整は0.5単位です。</li>
                            <li>GITADORA GALAXY WAVE DELTAの初期出荷モニターは遅延9msと仮定します。</li>
                            <li>各スピーカーから出る音の奥行バランスが曲によって異なるため、ヘッドホンを装着して音声遅延無しを想定します。</li>
                            <li>HI-SPEED x3.75、BPM 180はノーツがぶれない限度です。</li>
                        </ul>
                    `
                }
            };
            document.getElementById('modal-text').textContent = texts[lang].modal;
            document.getElementById('title').textContent = texts[lang].title;
            document.getElementById('subtitle').textContent = texts[lang].subtitle;
            document.getElementById('label-bpm').textContent = texts[lang].label_bpm;
            document.getElementById('label-hi-speed').textContent = texts[lang].label_hi_speed;
            document.getElementById('label-green-number').textContent = texts[lang].label_green_number;
            document.getElementById('label-white-number').textContent = texts[lang].label_white_number;
            document.getElementById('label-note-adjust').textContent = texts[lang].label_note_adjust;
            document.getElementById('label-judge-line').textContent = texts[lang].label_judge_line;
            document.getElementById('label-shutter-in').textContent = texts[lang].label_shutter_in;
            document.getElementById('label-shutter-out').textContent = texts[lang].label_shutter_out;
            document.getElementById('label-refresh-rate').textContent = texts[lang].label_refresh_rate;
            document.getElementById('label-monitor-delay').textContent = texts[lang].label_monitor_delay;
            document.getElementById('explanation').innerHTML = texts[lang].explanation;
            document.getElementById('notes').innerHTML = texts[lang].notes;
        }

        // Placeholder for settings calculation
        function calculateSettings() {
            // Requires JavaScript for spline interpolation and dynamic adjustments
            // Example logic (pseudo-code):
            // 1. Get BPM, HI-SPEED, green number from inputs
            // 2. Interpolate HI-SPEED limits (BPM 78: x8.5, BPM 180: x3.75, BPM 400: x1.5)
            // 3. Calculate green number (mimic IIDX Sudden+)
            // 4. Adjust note display (-20 to +20), judgment line (0-20), SHUTTER (IN) (0-30)
            // 5. Update white number (placeholder)
            // 6. Check HI-SPEED constraints and show warning if exceeded
            // 7. Save to localStorage
            // 8. Log change with timestamp
            console.log('Calculate settings placeholder');
        }

        // Placeholder for adjusting values
        function adjustValue(field, delta) {
            // Requires JavaScript to update input values and trigger calculations
            // Example: For HI-SPEED, ensure steps of 0.25 within 0.5-10.0
            console.log(`Adjust ${field} by ${delta}`);
        }

        // Load saved settings from localStorage
        window.onload = function() {
            // Requires JavaScript to retrieve and set input values
            console.log('Load saved settings placeholder');
        };
    </script>
</body>
</html>
