<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GITADORA GALAXY WAVE DELTA Drummania Settings Generator (unofficial)</title>
    <style>
        /* Minimal inline CSS for basic responsiveness and styling, as no external CSS allowed */
        body { font-family: Arial, sans-serif; margin: 10px; max-width: 100%; overflow-x: hidden; }
        h1 { font-size: 1.5em; text-align: center; }
        h2 { font-size: 1.2em; text-align: center; color: #555; }
        .modal { display: none; }
        #modal-toggle:checked ~ .modal { display: block; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal-content { background: white; margin: 20% auto; padding: 20px; width: 80%; text-align: center; border-radius: 10px; }
        .lang-toggle { text-align: right; margin-bottom: 10px; }
        .field { margin: 10px 0; display: flex; align-items: center; justify-content: space-between; }
        .field label { flex: 1; }
        .field input, .field button { margin-left: 5px; }
        input[disabled] { background: #e0e0e0; }
        .warning { color: red; font-size: 0.9em; }
        .notes { font-size: 0.9em; margin-top: 20px; }
        .history { margin-top: 20px; border: 1px solid #ccc; padding: 10px; }
        @media (max-width: 600px) { h1 { font-size: 1.2em; } h2 { font-size: 1em; } }
    </style>
</head>
<body>
    <!-- Modal using checkbox hack -->
    <input type="checkbox" id="modal-toggle" checked style="display: none;">
    <div class="modal">
        <div class="modal-content">
            <p><strong>目押し勢 or 新規プレイヤー<br>どちらかに該当する方のみ<br>OKボタンをタップ</strong></p>
            <p><strong>Visual Judgment Players or New Players<br>Only those who apply should tap OK</strong></p>
            <label for="modal-toggle"><button>OK</button></label>
        </div>
    </div>

    <!-- Language Toggle -->
    <div class="lang-toggle">
        <label><input type="radio" name="lang" checked> English</label>
        <label><input type="radio" name="lang"> 日本語</label>
    </div>

    <!-- English Content -->
    <div class="lang-en">
        <h1>GITADORA GALAXY WAVE DELTA Drummania Settings Generator (unofficial)</h1>
        <h2>Set the shutter top as the judgment line to disable delay.</h2>

        <!-- Input Fields -->
        <div class="field">
            <label>BPM:</label>
            <button>-</button>
            <input type="number" min="1" step="1" value="180">
            <button>+</button>
        </div>
        <div class="field">
            <label>HI-SPEED:</label>
            <button>-</button>
            <input type="number" min="0.5" max="10" step="0.25" value="3.75">
            <button>+</button>
            <span class="warning" id="hi-speed-warning"></span>
        </div>
        <div class="field">
            <label>Notes Display Adjustment:</label>
            <input type="number" min="-20" max="20" value="-6" disabled>
        </div>
        <div class="field">
            <label>Judgment Line Position:</label>
            <input type="number" min="0" max="20" value="8" disabled>
        </div>
        <div class="field">
            <label>SHUTTER (IN):</label>
            <input type="number" min="0" max="30" value="25" disabled>
        </div>
        <div class="field">
            <label>SHUTTER (OUT):</label>
            <input type="number" value="16" disabled>
        </div>
        <div class="field">
            <label>Refresh Rate (Hz):</label>
            <input type="number" value="60" disabled>
        </div>
        <div class="field">
            <label>Monitor Delay (ms):</label>
            <input type="number" value="9" disabled>
        </div>
        <div class="field">
            <label>GD Green Number:</label>
            <button>-</button>
            <input type="number" value="0">
            <button>+</button>
        </div>
        <div class="field">
            <label>White Number:</label>
            <input type="number" value="0" disabled>
        </div>

        <!-- Explanation -->
        <div class="notes">
            <p><strong>Explanation:</strong> This tool adjusts settings to fix the SHUTTER (OUT) top as the judgment line, ensuring notes align without delay at 60Hz. HI-SPEED is interpolated (e.g., BPM 400: x1.5, BPM 78: x8.5, BPM 180: x3.75). Exceeding interpolated HI-SPEED shows "Adjust Required" in red. Changing BPM updates HI-SPEED, Notes Display Adjustment, Judgment Line Position, and SHUTTER (IN) to maintain green number. Changing GD Green Number or HI-SPEED adjusts other fields while keeping BPM constant. Green/White numbers emulate beatmania IIDX 31 EPOLIS formulas, with GD Green Number as a virtualized personal setting.</p>
        </div>

        <!-- Notes -->
        <div class="notes">
            <p><strong>Notes:</strong></p>
            <ul>
                <li>Konaste HI-SPEED adjusts in 0.5 units.</li>
                <li>Assumes GITADORA GALAXY WAVE DELTA's default monitor has 9ms delay.</li>
                <li>Sound depth varies by song; use headphones for zero audio delay.</li>
                <li>HI-SPEED x3.75 at BPM 180 is the limit for stable notes.</li>
            </ul>
        </div>

        <!-- History Log -->
        <div class="history">
            <h3>Change History</h3>
            <textarea rows="5" cols="30" disabled>Timestamp: [Pending dynamic update]</textarea>
        </div>
    </div>

    <!-- Japanese Content -->
    <div class="lang-jp" style="display: none;">
        <h1>GITADORA GALAXY WAVE DELTA Drummania セッティングジェネレーター（非公式）</h1>
        <h2>シャッターの上部を判定ラインとして設定し、遅延を無効化します。</h2>

        <!-- Input Fields -->
        <div class="field">
            <label>BPM:</label>
            <button>-</button>
            <input type="number" min="1" step="1" value="180">
            <button>+</button>
        </div>
        <div class="field">
            <label>HI-SPEED:</label>
            <button>-</button>
            <input type="number" min="0.5" max="10" step="0.25" value="3.75">
            <button>+</button>
            <span class="warning" id="hi-speed-warning-jp"></span>
        </div>
        <div class="field">
            <label>ノーツ表示調整:</label>
            <input type="number" min="-20" max="20" value="-6" disabled>
        </div>
        <div class="field">
            <label>判定ライン位置:</label>
            <input type="number" min="0" max="20" value="8" disabled>
        </div>
        <div class="field">
            <label>SHUTTER (IN):</label>
            <input type="number" min="0" max="30" value="25" disabled>
        </div>
        <div class="field">
            <label>SHUTTER (OUT):</label>
            <input type="number" value="16" disabled>
        </div>
        <div class="field">
            <label>リフレッシュレート (Hz):</label>
            <input type="number" value="60" disabled>
        </div>
        <div class="field">
            <label>モニター遅延 (ms):</label>
            <input type="number" value="9" disabled>
        </div>
        <div class="field">
            <label>GD緑数字:</label>
            <button>-</button>
            <input type="number" value="0">
            <button>+</button>
        </div>
        <div class="field">
            <label>白数字:</label>
            <input type="number" value="0" disabled>
        </div>

        <!-- Explanation -->
        <div class="notes">
            <p><strong>説明:</strong> このツールは、SHUTTER (OUT)の上部を判定ラインとして固定し、60Hzでノーツがブレないように設定を調整します。HI-SPEEDは補間されます（例：BPM 400：x1.5、BPM 78：x8.5、BPM 180：x3.75）。補間されたHI-SPEEDを超えると「要調整」が赤で表示されます。BPMを変更すると、緑数字を維持しつつHI-SPEED、ノーツ表示調整、判定ライン位置、SHUTTER (IN)が更新されます。GD緑数字やHI-SPEEDを変更すると、BPMを維持しつつ他のフィールドが調整されます。緑/白数字はbeatmania IIDX 31 EPOLISの数式を模倣し、GD緑数字は個人設定を仮想化したものです。</p>
        </div>

        <!-- Notes -->
        <div class="notes">
            <p><strong>注意書き:</strong></p>
            <ul>
                <li>コナステのHI-SPEED調整は0.5単位です。</li>
                <li>GITADORA GALAXY WAVE DELTAの初期出荷モニターは遅延9msと仮定します。</li>
                <li>各スピーカーから出る音の奥行バランスが曲によって異なるため、ヘッドホンを装着して音声遅延無しを想定します。</li>
                <li>HI-SPEED x3.75 BPM 180はノーツがぶれない限度です。</li>
            </ul>
        </div>

        <!-- History Log -->
        <div class="history">
            <h3>変更履歴</h3>
            <textarea rows="5" cols="30" disabled>タイムスタンプ: [動的更新待ち]</textarea>
        </div>
    </div>
</body>
</html>
